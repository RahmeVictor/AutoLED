{% extends 'base.html' %}

{% block head %}
    <script src="https://cdn.jsdelivr.net/npm/@jaames/iro@5"></script> <!-- Color picker -->
    <script src="{{ url_for('static', filename='color-picker.js') }}"></script>
{% endblock %}

{% block content %}
    <div class="center-container">
        <div id="picker-container"></div>
        <form method="post">
            <input type="hidden" name="action" value="{% if add_controller %}add{% else %}delete{% endif %}">
            <label for="controller-name">Controller name</label>
            <input id="controller-name" name="name" type="text" value="{{ controller.name }}"
                   oninput="post_controller_data()">
            <input class="btn" type="submit" value="{% if add_controller %}Add{% else %}Delete{% endif %} controller">
        </form>
    </div>
{% endblock %}

{% block extra %}
    <script>
        initialize_color_picker();

        function post_controller_data() {
            $.post(window.location, {
                name: document.getElementById('controller-name').value,
            });
        }
    </script>
{% endblock %}